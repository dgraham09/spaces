<h1><%=@space.name%></h1>
<h2><%=@space.address%></h2>

<div>
  <% @space.rating.to_i.times do %>
    <span><i class="fa-solid fa-star"></i></span>
  <% end %>
  <% (5 - @space.rating.to_i).times do %>
    <span><i class="fa-regular fa-star"></i></span>
  <% end %>
  <%= @space.rating %>
</div>

<div class="office-space-card">
  <% if @space.photo.attached? %>
    <%= cl_image_tag @space.photo.key%>
  <% else %>
    <%= image_tag "stock/stock_space.jpg"%>
  <% end %>
</div>

<div class="d-flex">
  <div class="p-2">
    <h4> <%= @space.capacity %> people </h4>
    <p>Capacity</p>
  </div>
  <div class="p-2">
    <h4> <%= @space.price.truncate(2) %>€ </h4>
    <p>Half day rate</p>
  </div>
  <div class="p-2">
    <h4> <%= @space.price.truncate(2)*30*2 %>€ </h4>
    <p>Monthly rate</p>
  </div>
</div>


<div style="width: 50%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>

<% if user_signed_in? %>
  <div class="data-controller="bookings>
    <%= simple_form_for [@space, @booking], data:{ controller: "datepicker"} do |f| %>
      <%= f.input :booking_start_date,
                  label: "Booking dates",
                  as: :string,
                  input_html: { data: { datepicker_target: "start_date" }, class: "bg-warning"}%>
      <%= f.input :booking_end_date,
                  as: :string,
                  input_html: { data: { datepicker_target: "end_date"}, class: "bg-warning"} %>
      <%= f.button :submit, class: "btn btn-primary mb-3" %>
    <% end %>
  </div>
<% else %>
  <p>Sign in to book (placeholder)</p>
<% end %>

<%= link_to "Back To Spaces", spaces_path, class:"btn btn-primary" %>

<%# Move controller up to top of form and create two new targets %>
